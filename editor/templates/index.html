<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AquaScript ÁºñËæëÂô®</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåä</text></svg>">
</head>
<body>
    <div id="app">
        <!-- ËèúÂçïÊ†è -->
        <nav class="menu-bar">
            <div class="menu-group">
                <div class="menu-item" onclick="toggleDropdown('file-menu')">
                    <span>Êñá‰ª∂(F)</span>
                    <div id="file-menu" class="dropdown-menu">
                        <div class="menu-option" onclick="newFile()">
                            <i class="fas fa-file"></i> Êñ∞Âª∫Êñá‰ª∂ <span class="shortcut">Ctrl+N</span>
                        </div>
                        <div class="menu-option" onclick="openFile()">
                            <i class="fas fa-folder-open"></i> ÊâìÂºÄÊñá‰ª∂ <span class="shortcut">Ctrl+O</span>
                        </div>
                        <div class="menu-option" onclick="saveFile()">
                            <i class="fas fa-save"></i> ‰øùÂ≠ò <span class="shortcut">Ctrl+S</span>
                        </div>
                        <div class="menu-divider"></div>
                        <div class="menu-option" onclick="deleteFile()">
                            <i class="fas fa-trash"></i> Âà†Èô§Êñá‰ª∂
                        </div>
                    </div>
                </div>
                
                <div class="menu-item" onclick="toggleDropdown('edit-menu')">
                    <span>ÁºñËæë(E)</span>
                    <div id="edit-menu" class="dropdown-menu">
                        <div class="menu-option" onclick="undo()">
                            <i class="fas fa-undo"></i> Êí§ÈîÄ <span class="shortcut">Ctrl+Z</span>
                        </div>
                        <div class="menu-option" onclick="redo()">
                            <i class="fas fa-redo"></i> ÈáçÂÅö <span class="shortcut">Ctrl+Y</span>
                        </div>
                        <div class="menu-divider"></div>
                        <div class="menu-option" onclick="find()">
                            <i class="fas fa-search"></i> Êü•Êâæ <span class="shortcut">Ctrl+F</span>
                        </div>
                        <div class="menu-option" onclick="replace()">
                            <i class="fas fa-exchange-alt"></i> ÊõøÊç¢ <span class="shortcut">Ctrl+H</span>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item" onclick="toggleDropdown('compile-menu')">
                    <span>ÁºñËØë(C)</span>
                    <div id="compile-menu" class="dropdown-menu">
                        <div class="menu-option" onclick="compileCode()">
                            <i class="fas fa-cog"></i> ÁºñËØë <span class="shortcut">F7</span>
                        </div>
                        <div class="menu-option" onclick="runCode()">
                            <i class="fas fa-play"></i> ÁºñËØëÂπ∂ËøêË°å <span class="shortcut">F5</span>
                        </div>
                        <div class="menu-divider"></div>
                        <div class="menu-option" onclick="clearConsole()">
                            <i class="fas fa-broom"></i> Ê∏ÖÁ©∫ÊéßÂà∂Âè∞
                        </div>
                    </div>
                </div>
                
                <div class="menu-item" onclick="toggleDropdown('about-menu')">
                    <span>ÂÖ≥‰∫é(A)</span>
                    <div id="about-menu" class="dropdown-menu">
                        <div class="menu-option" onclick="showHelp()">
                            <i class="fas fa-question-circle"></i> Â∏ÆÂä©ÊñáÊ°£
                        </div>
                        <div class="menu-option" onclick="showAbout()">
                            <i class="fas fa-info-circle"></i> ÂÖ≥‰∫éÁºñËæëÂô®
                        </div>
                        <div class="menu-divider"></div>
                        <div class="menu-option" onclick="toggleTheme()">
                            <i class="fas fa-palette"></i> ÂàáÊç¢‰∏ªÈ¢ò
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="menu-actions">
                <button class="action-btn compile-btn" onclick="compileCode()" title="ÁºñËØë (F7)">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="action-btn run-btn" onclick="runCode()" title="ËøêË°å (F5)">
                    <i class="fas fa-play"></i>
                </button>
                <button class="action-btn theme-btn" onclick="toggleTheme()" title="ÂàáÊç¢‰∏ªÈ¢ò">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </nav>

        <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->
        <div class="main-content">
            <!-- ‰æßËæπÊ†è - Êñá‰ª∂ÊµèËßàÂô® -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <h3><i class="fas fa-folder"></i> Êñá‰ª∂ÊµèËßàÂô®</h3>
                    <div class="sidebar-actions">
                        <button onclick="refreshFiles()" title="Âà∑Êñ∞">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <button onclick="newFile()" title="Êñ∞Âª∫Êñá‰ª∂">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>
                <div class="file-tree" id="file-tree">
                    <div class="loading">
                        <i class="fas fa-spinner fa-spin"></i> Âä†ËΩΩ‰∏≠...
                    </div>
                </div>
            </div>

            <!-- ÁºñËæëÂô®Âå∫Âüü -->
            <div class="editor-container">
                <div class="editor-header">
                    <div class="tab-bar" id="tab-bar">
                        <div class="tab welcome-tab active">
                            <span class="tab-title">
                                <i class="fas fa-home"></i> Ê¨¢Ëøé
                            </span>
                        </div>
                    </div>
                </div>
                
                <div class="editor-content">
                    <div id="welcome-screen" class="welcome-screen">
                        <div class="welcome-content">
                            <h1><i class="fas fa-water"></i> AquaScript ÁºñËæëÂô®</h1>
                            <p>Ê¨¢Ëøé‰ΩøÁî® AquaScript ‰ª£Á†ÅÁºñËæëÂô®ÔºÅ</p>
                            
                            <div class="quick-actions">
                                <button class="quick-btn" onclick="newFile()">
                                    <i class="fas fa-file-plus"></i>
                                    <span>Êñ∞Âª∫Êñá‰ª∂</span>
                                </button>
                                <button class="quick-btn" onclick="openSampleFile()">
                                    <i class="fas fa-code"></i>
                                    <span>ÊâìÂºÄÁ§∫‰æã</span>
                                </button>
                                <button class="quick-btn" onclick="showHelp()">
                                    <i class="fas fa-book"></i>
                                    <span>Êü•ÁúãÊñáÊ°£</span>
                                </button>
                            </div>
                            
                            <div class="features">
                                <h3>ÁºñËæëÂô®ÁâπÊÄß</h3>
                                <ul>
                                    <li><i class="fas fa-check"></i> ËØ≠Ê≥ïÈ´ò‰∫ÆÂíåÊô∫ËÉΩÊèêÁ§∫</li>
                                    <li><i class="fas fa-check"></i> ‰∏ÄÈîÆÁºñËØëËøêË°å</li>
                                    <li><i class="fas fa-check"></i> ÈõÜÊàêÊñá‰ª∂ÁÆ°ÁêÜÂô®</li>
                                    <li><i class="fas fa-check"></i> ÂÆûÊó∂ÊéßÂà∂Âè∞ËæìÂá∫</li>
                                    <li><i class="fas fa-check"></i> Ê∑±Ëâ≤/ÊµÖËâ≤‰∏ªÈ¢ò</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div id="monaco-editor" class="monaco-editor" style="display: none;"></div>
                </div>
            </div>
        </div>

        <!-- ÊéßÂà∂Âè∞ -->
        <div class="console-container">
            <div class="console-header">
                <h3><i class="fas fa-terminal"></i> ÊéßÂà∂Âè∞</h3>
                <div class="console-actions">
                    <button onclick="clearConsole()" title="Ê∏ÖÁ©∫ÊéßÂà∂Âè∞">
                        <i class="fas fa-broom"></i>
                    </button>
                    <button onclick="toggleConsole()" title="ÊäòÂè†/Â±ïÂºÄ">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
            </div>
            <div class="console-content" id="console-content">
                <div class="console-line welcome-line">
                    <span class="timestamp">[Á≥ªÁªü]</span>
                    <span class="message">Ê¨¢Ëøé‰ΩøÁî® AquaScript ÁºñËæëÂô®ÔºÅ</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Ê®°ÊÄÅÂØπËØùÊ°Ü -->
    <div id="modal-overlay" class="modal-overlay" onclick="closeModal()">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3 id="modal-title">Ê†áÈ¢ò</h3>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modal-body">
                ÂÜÖÂÆπ
            </div>
            <div class="modal-footer" id="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">ÂèñÊ∂à</button>
                <button class="btn btn-primary" onclick="confirmModal()">Á°ÆÂÆö</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs/loader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script src="{{ url_for('static', filename='js/editor.js') }}"></script>
    <script src="{{ url_for('static', filename='js/file-manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/console.js') }}"></script>
</body>
</html>